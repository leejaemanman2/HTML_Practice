<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css
/bootstrap.min.css" rel="stylesheet">
</head>

<body>

    <div class="container mt-4">
        <input type="text">
        <button>검색</button>
        <h2>세종시 야간 약국 정보</h2>
        <div id="content"></div>
    </div>
    <script>
        const input = document.querySelector('input');
        const button = document.querySelector('button');
        button.addEventListener('click', () => {
            const search = input.value;
            console.log(search);
            getData(search);
        });



        function getData(search) {
            const url = `https://ggoreb.pythonanywhere.com/night_pharmacy/data/?search=${search}`;

            fetch(url)
                .then((data) => data.json())  // 첫 번째 then: 응답을 JSON으로 변환
                .then((result) => {           // 두 번째 then: JSON 데이터를 활용
                    //console.log(result);
                    const data = result.data;
                    let html = `<table class="table table-bordered table-striped">
<thead class="table-dark">
<tr>
<th>약국명</th>
<th>전화번호</th>
<th>주소</th>
</tr>
</thead>
<tbody>`;

                    data.forEach((v) => {
                        const name = v.name;
                        const phone = v.tel;
                        const address = v.road_address;
                        html += `<tr>
<td>${name}</td>
<td>${phone}</td>
<td>${address}</td>
</tr>`;
                    });

                    html += `</tbody></table>`;
                    document.getElementById("content").innerHTML = html;
                })
                .catch((err) => console.error(err));


            html += `</tbody>
</table>`;
            const content = document.querySelector('#content');
            content.innerHTML = html;

        }

    </script>


</body>