<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css
/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-4">
        <input type="text">
        <button>검색</button>

        <h2>세종시 야간 약국 정보</h2>
        <div id="content"></div>
    </div>
    <script>
        const input = document.querySelector('input');
        const button = document.querySelector('button');
        button.addEventListener('click', () => {
            const search = input.value;
            console.log(search);
            getData(search);
        });

        function getData(search) {
            const url =
                `https://ggoreb.pythonanywhere.com/night_pharmacy/data/?search=${search}`;
            const res = fetch(url);
            const res2 = res.then((data) => {
                return data.json();
            });
            res2.then((result) => {
                const data = result.data;
                // console.log(data);
                let html = `<table class="table table-bordered table-striped">
      <thead class="table-dark">
      <tr>
      <th>약국명</th>
      <th>전화번호</th>
      <th>주소</th>
      </tr>
      </thead>
      <tbody>`;
                for (let i = 0; i < data.length; i++) {
                    const d = data[i];
                    const name = d.name;
                    const tel = d.tel;
                    const road_address = d.road_address;
                    html += `<tr>
          <td>${name}</td>
          <td>${tel}</td>
          <td>${road_address}</td>
          </tr>`;
                    console.log(name, tel, road_address);
                }
                html += `</tbody></table>`;

                const content = document.querySelector("#content");
                content.innerHTML = html;

                // [ 'tr', 'tr', 'tr', ... ]
                const trs = document.querySelectorAll("tr");
                for (const tr of trs) {
                    tr.addEventListener('click', (e) => {
                        alert(e.target.innerHTML);
                    });
                }
            });
        }

    </script>
</body>


        
    


